(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3835],{8110:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/page-register",function(){return a(3754)}])},3754:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Register}});var r=a(5893),t=a(7294),n=a(1163),i=a(8504),l=a(1664),c=a.n(l),o=a(4173);a(7967);var d=a(9471);let h="YOUR_CLIENT_ID",m="YOUR_REDIRECT_URI";function Register(){let e=(0,n.useRouter)(),[s,a]=(0,t.useState)({email:"",password:"",password2:"",tc:!1,user_type:1}),[l,u]=(0,t.useState)(null);(0,t.useEffect)(()=>{let{usertype:s}=e.query;s&&a(e=>({...e,user_type:parseInt(s)})),e.query.code&&handleMeriPehchaanLogin(e.query.code)},[e.query]);let handleChange=e=>{let{name:r,value:t,type:n,checked:i}=e.target;a({...s,[r]:"checkbox"===n?i:t})},handleSubmit=async a=>{if(a.preventDefault(),s.password!==s.password2){o.Am.error("Passwords do not match");return}let r={email:s.email,password:s.password,password2:s.password2,tc:s.tc,user_type:s.user_type};try{let s=await fetch("".concat(d.Z,"user/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(s.ok)o.Am.success("Registration successful!"),u(null),e.push("/login");else{let e=await s.json();o.Am.error(e.detail||"Registration failed"),u(e.detail||"Registration failed")}}catch(e){o.Am.error("Something went wrong. Please try again later."),u("Something went wrong. Please try again later.")}},handleMeriPehchaanLogin=async s=>{try{let a=await fetch("https://meripehchaan.gov.in/public/oauth2/2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:s,grant_type:"authorization_code",client_id:h,client_secret:"YOUR_CLIENT_SECRET",redirect_uri:m})});if(a.ok){let s=await a.json();console.log("Meri Pehchaan Token Data:",s),o.Am.success("Meri Pehchaan login successful!"),e.push("/dashboard")}else throw Error("Failed to authenticate with Meri Pehchaan.")}catch(e){console.error("Error during Meri Pehchaan login:",e),o.Am.error("Meri Pehchaan login failed. Please try again.")}};return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)("section",{className:"pt-100 login-register",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row login-register-cover",children:[(0,r.jsxs)("div",{className:"col-lg-4 col-md-6 col-sm-12 mx-auto",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"font-sm text-brand-2",children:"Register"}),(0,r.jsx)("h2",{className:"mt-10 mb-5 text-brand-1",children:"Start for free Today"}),(0,r.jsx)("p",{className:"font-sm text-muted mb-30",children:"Access to all features. No credit card required."}),(0,r.jsxs)("button",{className:"btn social-login hover-up mb-20 flex items-center justify-center gap-3",onClick:()=>{let e="".concat("https://meripehchaan.gov.in/public/oauth2/1/authorize","?response_type=code&client_id=").concat(h,"&redirect_uri=").concat(m,"&state=").concat("random_string","&scope=openid");window.location.href=e},style:{padding:"10px 20px"},children:[(0,r.jsx)("img",{src:"assets/imgs/template/icons/icon-digilocker.svg",alt:"bugbear",style:{width:"24px",height:"24px"}}),(0,r.jsx)("strong",{children:"Sign up with Meri Pehchaan"})]}),(0,r.jsx)("div",{className:"divider-text-center",children:(0,r.jsx)("span",{children:"Or continue with"})})]}),(0,r.jsxs)("form",{className:"login-register text-start mt-20",onSubmit:handleSubmit,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email *"}),(0,r.jsx)("input",{className:"form-control",id:"email",type:"email",name:"email",placeholder:"stevenjob@gmail.com",value:s.email,onChange:handleChange,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password *"}),(0,r.jsx)("input",{className:"form-control",id:"password",type:"password",name:"password",placeholder:"************",value:s.password,onChange:handleChange,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",htmlFor:"password2",children:"Confirm Password *"}),(0,r.jsx)("input",{className:"form-control",id:"password2",type:"password",name:"password2",placeholder:"************",value:s.password2,onChange:handleChange,required:!0})]}),(0,r.jsxs)("div",{className:"login_footer form-group d-flex justify-content-between",children:[(0,r.jsxs)("label",{className:"cb-container",children:[(0,r.jsx)("input",{type:"checkbox",name:"tc",checked:s.tc,onChange:handleChange}),(0,r.jsx)("span",{className:"text-small",children:"Agree to our terms and policy"}),(0,r.jsx)("span",{className:"checkmark"})]}),(0,r.jsx)(c(),{href:"/page-contact",children:(0,r.jsx)("span",{className:"text-muted",children:"Learn more"})})]}),(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("button",{className:"btn btn-brand-1 hover-up w-100",type:"submit",children:"Submit & Register"})}),(0,r.jsxs)("div",{className:"text-muted text-center",children:["Already have an account?",(0,r.jsx)(c(),{href:"/login",children:(0,r.jsx)("span",{children:"Sign in"})})]})]})]}),(0,r.jsx)("div",{className:"img-1 d-none d-lg-block",children:(0,r.jsx)("img",{className:"shape-1",src:"assets/imgs/page/login-register/img-1.svg",alt:"bugbear"})}),(0,r.jsx)("div",{className:"img-2",children:(0,r.jsx)("img",{src:"assets/imgs/page/login-register/img-2.svg",alt:"bugbear"})})]})})}),(0,r.jsx)(o.Ix,{})]})}},9471:function(e,s){"use strict";s.Z="http://35.154.204.105/api/"},7967:function(){}},function(e){e.O(0,[1653,9865,8504,9774,2888,179],function(){return e(e.s=8110)}),_N_E=e.O()}]);